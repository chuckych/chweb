function ActualizaTablas(){$("#Visualizar").is(":checked")?$("#GetFechas").DataTable().ajax.reload(null,!1):($("#GetPersonal").DataTable().ajax.reload(null,!1),$("#Per2").addClass("d-none"),$(".pers_legajo").removeClass("d-none"))}var map={17:!1,18:!1,32:!1,16:!1,39:!1,37:!1,13:!1,27:!1};$(document).keydown((function(a){a.keyCode in map&&(map[a.keyCode]=!0,map[32]&&$("#Filtros").modal("show")),a.keyCode in map&&(map[a.keyCode]=!0,map[27]&&$("#Filtros").modal("hide")),a.keyCode in map&&(map[a.keyCode]=!0,map[39]&&($("#Visualizar").is(":checked")?$("#GetFechas").DataTable().page("next").draw("page"):$("#GetPersonal").DataTable().page("next").draw("page"))),a.keyCode in map&&(map[a.keyCode]=!0,map[37]&&($("#Visualizar").is(":checked")?$("#GetFechas").DataTable().page("previous").draw("page"):$("#GetPersonal").DataTable().page("previous").draw("page")))})).keyup((function(a){a.keyCode in map&&(map[a.keyCode]=!1)})),$("#pagFech").hide(),$("#GetGeneralFechaTable").hide(),$("#datoFicDiaL").val("1"),$("#FicDiaL").change((function(){CheckSesion(),$("#FicDiaL").is(":checked")?($("#datoFicDiaL").val("1"),ActualizaTablas()):($("#datoFicDiaL").val("0"),ActualizaTablas())})),$("#datoFicFalta").val("0"),$("#FicFalta").change((function(){$("#FicFalta").is(":checked")?($("#datoFicFalta").val("1"),$("#datoFicNovA").val("0"),$("#FicNovA").prop("checked",!1),$("#FicNovA").prop("disabled",!0),ActualizaTablas()):($("#datoFicFalta").val("0"),$("#FicNovA").prop("disabled",!1),ActualizaTablas())})),$("#datoFicNovT").val("0"),$("#FicNovT").change((function(){$("#FicNovT").is(":checked")?($("#datoFicNovT").val("1"),$("#datoFicNovA").val("0"),$("#FicNovA").prop("checked",!1),$("#FicNovA").prop("disabled",!0),ActualizaTablas()):($("#datoFicNovT").val("0"),$("#FicNovA").prop("disabled",!1),ActualizaTablas())})),$("#datoFicNovI").val("0"),$("#FicNovI").change((function(){$("#FicNovI").is(":checked")?($("#datoFicNovI").val("1"),$("#datoFicNovA").val("0"),$("#FicNovA").prop("checked",!1),$("#FicNovA").prop("disabled",!0),ActualizaTablas()):($("#datoFicNovI").val("0"),$("#FicNovA").prop("disabled",!1),ActualizaTablas())})),$("#datoFicNovS").val("0"),$("#FicNovS").change((function(){$("#FicNovS").is(":checked")?($("#datoFicNovS").val("1"),$("#datoFicNovA").val("0"),$("#FicNovA").prop("checked",!1),$("#FicNovA").prop("disabled",!0),ActualizaTablas()):($("#datoFicNovS").val("0"),$("#FicNovA").prop("disabled",!1),ActualizaTablas())})),$("#datoFicNovA").val("0"),$("#FicNovA").change((function(){$("#FicNovA").is(":checked")?($("#datoFicNovA").val("1"),$("#datoFicFalta").val("0"),$("#datoFicNovT").val("0"),$("#datoFicNovI").val("0"),$("#datoFicNovS").val("0"),$("#FicNovI").prop("checked",!1),$("#FicFalta").prop("checked",!1),$("#FicNovT").prop("checked",!1),$("#FicNovS").prop("checked",!1),$("#FicFalta").prop("disabled",!0),$("#FicNovT").prop("disabled",!0),$("#FicNovI").prop("disabled",!0),$("#FicNovS").prop("disabled",!0),ActualizaTablas()):($("#datoFicNovA").val("0"),$("#FicFalta").prop("disabled",!1),$("#FicNovT").prop("disabled",!1),$("#FicNovI").prop("disabled",!1),$("#FicNovS").prop("disabled",!1),ActualizaTablas())}));var GetPersonal=$("#GetPersonal").DataTable({initComplete:function(a,e){},drawCallback:function(a){$("#GetPersonal thead").remove(),$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$("#pagLega").removeClass("d-none"),$("#GetGeneral").DataTable().ajax.reload(null,!1),fadeInOnly("#GetGeneral"),a.json.recordsTotal>0?$("#Visualizar").prop("disabled",!1):$("#Visualizar").prop("disabled",!0)},pagingType:"full",lengthMenu:[[1],[1]],bProcessing:!1,serverSide:!0,deferRender:!0,searchDelay:1500,dom:',<"d-inline-flex d-flex align-items-center"t<"m,l-2"p>><"mt-n3 d-flex justify-content-end"i>',ajax:{url:"/"+$("#_homehost").val()+"/general/GetPersonalFichas.php",type:"POST",data:function(a){a._l=$("#_l").val(),a.Per=$("#Per").val(),a.Per2=$("#Per2").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a.FicDiaL=$("#datoFicDiaL").val(),a.FicFalta=$("#datoFicFalta").val(),a.FicNovT=$("#datoFicNovT").val(),a.FicNovI=$("#datoFicNovI").val(),a.FicNovS=$("#datoFicNovS").val(),a.FicNovA=$("#datoFicNovA").val()},error:function(){$("#GetPersonal_processing").css("display","none")}},columns:[{class:"w80 px-3 border fw4 bg-light radius pers_legajo",data:"pers_legajo"},{class:"w300 px-3 border border-left-0 fw4 bg-light radius",data:"pers_nombre"}],paging:!0,responsive:!1,info:!0,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json"}}),buttonCommon={exportOptions:{format:{body:function(a,e,l,o){return 5===l?a.replace(/[$,]/g,""):a}}}},GetGeneral=$("#GetGeneral").DataTable({initComplete:function(a,e){$("#Refresh").prop("disabled",!1),$("#trash_all").removeClass("invisible"),fadeInOnly("#GetGeneralTable"),fadeInOnly("#pagLega")},drawCallback:function(a){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),$("#pagLega").removeClass("invisible"),$("#GetGeneralTable").removeClass("invisible"),setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3)},lengthMenu:[[30,60,90,120],[30,60,90,120]],bProcessing:!0,serverSide:!0,deferRender:!0,searchDelay:1500,ajax:{url:"/"+$("#_homehost").val()+"/general/GetGeneral.php",type:"POST",data:function(a){a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.FicDiaL=$("#datoFicDiaL").val(),a.FicFalta=$("#datoFicFalta").val(),a.FicNovT=$("#datoFicNovT").val(),a.FicNovI=$("#datoFicNovI").val(),a.FicNovS=$("#datoFicNovS").val(),a.FicNovA=$("#datoFicNovA").val()},error:function(){$("#GetGeneral").css("display","none")}},columns:[{class:"align-middle",data:"modal"},{class:"align-middle",data:"FechaDia"},{class:"text-nowrap ls1 align-middle",data:"Gen_Horario"},{class:"ls1 text-center fw4 align-middle",data:"Primera"},{class:"align-middle",data:"DescHoras"},{class:"text-center fw4 ls1 align-middle",data:"HsAuto"},{class:"text-center ls1 align-middle",data:"HsCalc"},{class:"align-middle",data:"Novedades"},{class:"text-center fw4 ls1 align-middle",data:"NovHor"}],scrollX:!0,scrollCollapse:!0,scrollY:"50vmax",paging:!0,info:!0,searching:!1,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json"}});setTimeout((function(){$("#GetFechas").DataTable({initComplete:function(a,e){$("#GetFechas thead").remove()},drawCallback:function(a){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),fadeInOnly("#GetGeneralFecha"),a.json.recordsTotal>0?($("#GetGeneralFecha").DataTable().ajax.reload(null,!1),$("#GetGeneralFechaTotales").DataTable().ajax.reload(null,!1)):$("#GetGeneralFecha").DataTable().clear().draw()},pagingType:"full",lengthMenu:[[1],[1]],bProcessing:!1,serverSide:!0,deferRender:!0,searchDelay:1500,dom:'<"d-inline-flex d-flex align-items-center"t<"ml-2"p>><"mt-n3 d-flex justify-content-end"i>',ajax:{url:"/"+$("#_homehost").val()+"/general/GetFechasFichas.php",type:"POST",data:function(a){a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.FicDiaL=$("#datoFicDiaL").val(),a.FicFalta=$("#datoFicFalta").val(),a.FicNovT=$("#datoFicNovT").val(),a.FicNovI=$("#datoFicNovI").val(),a.FicNovS=$("#datoFicNovS").val(),a.FicNovA=$("#datoFicNovA").val()},error:function(){$("#GetFecha_processing").css("display","none")}},columns:[{class:"w80 px-3 border fw4 bg-light radius ls1",data:"FicFech"},{class:"w300 px-3 border fw4 bg-light radius",data:"Dia"}],paging:!0,responsive:!1,info:!0,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json"}}),$("#GetGeneralFecha").DataTable({initComplete:function(a,e){setTimeout((function(){$(".dt-button").addClass("btn btn-sm btn-outline-custom fontq border"),$(".dt-button").removeClass("dt-button buttons-csv buttons-html5"),$(".dt-buttons").removeClass("d-none"),$(".dt-button").removeAttr("style")}),500)},drawCallback:function(a){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),a.json.recordsTotal,setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3)},lengthMenu:[[10,25,50,100],[10,25,50,100]],bProcessing:!0,serverSide:!0,deferRender:!0,searchDelay:1500,dom:"lBfrtip",ajax:{url:"/"+$("#_homehost").val()+"/general/GetGeneralFecha.php",type:"POST",data:function(a){a._f=$("#_f").val(),a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.FicDiaL=$("#datoFicDiaL").val(),a.FicFalta=$("#datoFicFalta").val(),a.FicNovT=$("#datoFicNovT").val(),a.FicNovI=$("#datoFicNovI").val(),a.FicNovS=$("#datoFicNovS").val(),a.FicNovA=$("#datoFicNovA").val()},error:function(){$("#GetGeneralFecha_processing").css("display","none")}},columns:[{class:"align-middle",data:"modal"},{class:"align-middle",data:"LegNombre"},{class:"text-nowrap ls1 align-middle",data:"Gen_Horario"},{class:"ls1 text-center fw4 align-middle",data:"Primera"},{class:"align-middle",data:"DescHoras"},{class:"text-center fw4 ls1 align-middle",data:"HsAuto"},{class:"text-center ls1 align-middle",data:"HsCalc"},{class:"align-middle",data:"Novedades"},{class:"text-center fw4 ls1 align-middle",data:"NovHor"}],scrollX:!0,scrollCollapse:!0,scrollY:"50vmax",paging:!0,info:!0,searching:!0,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json"}})}),1e3),$("#GetPersonal").on("page.dt",(function(){CheckSesion()})),$("#GetGeneral").on("page.dt",(function(){CheckSesion()})),$("#GetFechas").on("page.dt",(function(){CheckSesion()})),$("#GetGeneralFecha").on("page.dt",(function(){CheckSesion()})),$("#Refresh").on("click",(function(){ActualizaTablas(),CheckSesion()})),$("#_dr").change((function(){CheckSesion(),ActualizaTablas()})),$("#Visualizar").change((function(){CheckSesion(),$("#Per2").addClass("d-none")})),$("#VerPor").html('<span class="d-none d-lg-block">Por Fecha</span>'),$("#VerPorM").html('<span class="d-block d-lg-none">Fecha</span>'),$("#Visualizar").change((function(){$("#Visualizar").is(":checked")?($("#GetFechas").DataTable().ajax.reload(null,!1),$("#GetGeneralTable").addClass("d-none"),$("#GetGeneralFechaTable").show(),$("#pagLega").hide(),$("#pagFech").show()):($("#GetPersonal").DataTable().ajax.reload(null,!1),$("#GetGeneralTable").removeClass("d-none"),$("#GetGeneralFechaTable").hide(),$("#pagFech").hide(),$("#pagLega").show())}));