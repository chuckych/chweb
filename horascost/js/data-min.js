function ActualizaTablas(){$("#Visualizar").is(":checked")?$("#GetFechas").DataTable().ajax.reload():$("#GetPersonal").DataTable().ajax.reload()}onOpenSelect2();var map={17:!1,18:!1,32:!1,16:!1,39:!1,37:!1,13:!1,27:!1};function GetHoras(){let a=$("#GetHoras").DataTable({columnDefs:[{visible:!1,targets:0,type:"html"},{visible:!0,targets:1,type:"html"}],bProcessing:!0,serverSide:!1,searchDelay:1500,orderFixed:[[0,"asc"]],iDisplayLength:-1,rowGroup:{dataSrc:[$("#Agrupar").val()]},ajax:{url:"GetHoras.php",type:"POST",data:function(a){a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.Thora=$("#Thora").val(),a.SHoras=$("#SHoras").val(),a.HoraMin=$("#HoraMin").val(),a.HoraMax=$("#HoraMax").val(),a.Calculos=$("#Calculos").val(),a.Tar=$("#Tar").val()},error:function(){$("#GetHoras_processing").css("display","none")}},columns:[{class:"",data:$("#Agrupar").val()},{class:"",data:"FechaDia"},{class:"",data:"Horario"},{class:"",data:"HoraDesc"},{class:"ls1 text-center bg-light",data:"CalcHoras"},{class:"",data:"Costo"},{class:"",data:"TareaDesc"},{class:"",data:"PlantaDesc"},{class:"",data:"SucurDesc"},{class:"",data:"GrupDesc"},{class:"",data:"SectDesc"}],deferRender:!0,paging:!1,searching:!1,scrollY:"50vh",scrollX:!0,scrollCollapse:!0,info:!0,language:{url:"../js/DataTableSpanishShort2.json?"+vjs()}});return a.on("draw.dt",(function(a,e){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),$("#pagLega").removeClass("invisible"),$("#GetHorasTable").removeClass("invisible"),setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3)})),a.on("init.dt",(function(a,e){$("#Refresh").prop("disabled",!1),$("#trash_all").removeClass("invisible"),fadeInOnly("#pagLega"),fadeInOnly("#GetHorasTable")})),a}$(document).keydown((function(a){a.keyCode in map&&(map[a.keyCode]=!0,map[32]&&$("#Filtros").modal("show")),a.keyCode in map&&(map[a.keyCode]=!0,map[27]&&$("#Filtros").modal("hide")),a.keyCode in map&&(map[a.keyCode]=!0,map[13]&&ActualizaTablas()),a.keyCode in map&&(map[a.keyCode]=!0,map[39]&&($("#Visualizar").is(":checked")?$("#GetFechas").DataTable().page("next").draw("page"):$("#GetPersonal").DataTable().page("next").draw("page"))),a.keyCode in map&&(map[a.keyCode]=!0,map[37]&&($("#Visualizar").is(":checked")?$("#GetFechas").DataTable().page("previous").draw("page"):$("#GetPersonal").DataTable().page("previous").draw("page")))})).keyup((function(a){a.keyCode in map&&(map[a.keyCode]=!1)})),$("#pagFech").addClass("d-none"),$("#GetHorasFechaTable").addClass("d-none"),$("#Visualizar").prop("disabled",!0),$(".selectAgrupar").on("select2:select",(function(a){$("#GetHoras").DataTable().clear().destroy(),GetHoras(),$("#GetHorasTotales").DataTable().ajax.reload(),$("#GetHorasFecha").DataTable().clear().destroy(),GetHorasFecha(),$("#GetHorasFechaTotales").DataTable().ajax.reload(),Cookies.set("AgrupaHorasCost",$("#Agrupar").val())})),SelectSelect2(".selectAgrupar",!1,"Agrupar Por",0,-1,10,!1),GetHoras();let GetPersonal=$("#GetPersonal").DataTable({pagingType:"full",lengthMenu:[[1],[1]],bProcessing:!1,serverSide:!0,deferRender:!0,searchDelay:1500,dom:'<"d-inline-flex d-flex align-items-center"t<"ml-2"p>><"mt-n3 d-flex justify-content-end"i>',ajax:{url:"GetPersonalFichas01.php",type:"POST",data:function(a){a._l=$("#_l").val(),a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a.Thora=$("#Thora").val(),a.SHoras=$("#SHoras").val(),a.HoraMin=$("#HoraMin").val(),a.HoraMax=$("#HoraMax").val(),a.Tar=$("#Tar").val()},error:function(){$("#GetPersonal_processing").css("display","none")}},columns:[{class:"w80 px-3 border fw4 bg-light radius",data:"pers_legajo"},{class:"w300 px-3 border border-left-0 fw4 bg-light radius",data:"pers_nombre"}],paging:!0,responsive:!1,info:!0,ordering:!1,language:{url:"../js/DataTableSpanishShort.json?"+vjs()}});GetPersonal.on("draw.dt",(function(a,e){$("#GetPersonal thead").remove(),$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$("#GetHoras").DataTable().ajax.reload(),$("#GetHorasTotales").DataTable().ajax.reload()}));let GetHorasTotales=$("#GetHorasTotales").DataTable({rowGroup:{dataSrc:"Agrup"},bProcessing:!0,serverSide:!0,deferRender:!0,searchDelay:1500,ajax:{url:"GetHorasTotales.php",type:"POST",data:function(a){a._l=$("#_l").val(),a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a.Thora=$("#Thora").val(),a.SHoras=$("#SHoras").val(),a.HoraMin=$("#HoraMin").val(),a.HoraMax=$("#HoraMax").val(),a.Calculos=$("#Calculos").val(),a.Tar=$("#Tar").val(),a.Agrup=$(".selectAgrupar").val()},error:function(){$("#GetHorasNew_processing").css("display","none")}},columns:[{class:"ls1 text-center",data:"FicHora"},{class:"w150",data:"THoDesc"},{class:"ls1 text-center bg-light",data:"CalcHoras"}],scrollX:!0,scrollCollapse:!1,paging:!1,responsive:!1,info:!1,searching:!1,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json?"+vjs()}});function GetHorasFecha(){let a=$("#GetHorasFecha").DataTable({columnDefs:[{visible:!1,targets:0,type:"html"}],bProcessing:!0,serverSide:!1,searchDelay:1500,orderFixed:[[6,"asc"],[0,"asc"]],iDisplayLength:-1,rowGroup:{dataSrc:[$("#Agrupar").val()]},ajax:{url:"GetHorasFecha.php",type:"POST",data:function(a){a._f=$("#_f").val(),a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.Thora=$("#Thora").val(),a.SHoras=$("#SHoras").val(),a.HoraMin=$("#HoraMin").val(),a.HoraMax=$("#HoraMax").val(),a.Calculos=$("#Calculos").val(),a.Tar=$("#Tar").val()},error:function(){$("#GetHorasFecha_processing").css("display","none")}},columns:[{class:"",data:"Legajo"},{class:"",data:"LegNombre"},{class:"",data:"Horario"},{class:"",data:"HoraDesc"},{class:"ls1 text-center bg-light",data:"CalcHoras"},{class:"d-none",data:"Tarea"},{class:"d-none",data:$("#Agrupar").val()},{class:"",data:"Costo"},{class:"",data:"TareaDesc"},{class:"",data:"PlantaDesc"},{class:"",data:"SucurDesc"},{class:"",data:"GrupDesc"},{class:" text-wrap",data:"SectDesc"}],deferRender:!0,paging:!1,searching:!1,scrollY:"50vh",scrollX:!0,scrollCollapse:!0,info:!0,language:{url:"../js/DataTableSpanishShort2.json?"+vjs()}});return a.on("draw.dt",(function(a,e){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),$("#Visualizar").prop("disabled",!1),$("#GetHorasFechaTable").removeClass("invisible"),setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3)})),a}GetHorasTotales.on("draw.dt",(function(a,e){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3),$("#GetHorasTotalesTable").removeClass("invisible"),$("#GetHorasTotales_wrapper thead").remove()})),GetHorasTotales.on("init.dt",(function(a,e){$("#Refresh").prop("disabled",!1),$("#trash_all").removeClass("invisible")})),GetHorasFecha(),setTimeout((function(){let a=$("#GetFechas").DataTable({pagingType:"full",lengthMenu:[[1],[1]],bProcessing:!1,serverSide:!0,deferRender:!0,searchDelay:1500,dom:'<"d-inline-flex d-flex align-items-center"t<"ml-2"p>><"mt-n3 d-flex justify-content-end"i>',ajax:{url:"GetFechasFichas1.php",type:"POST",data:function(a){a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.Thora=$("#Thora").val(),a.SHoras=$("#SHoras").val(),a.HoraMin=$("#HoraMin").val(),a.HoraMax=$("#HoraMax").val(),a.Tar=$("#Tar").val()},error:function(){$("#GetFecha_processing").css("display","none")}},columns:[{class:"w80 px-3 border fw4 bg-light radius ls1",data:"FicFech"},{class:"w300 px-3 border fw4 bg-light radius",data:"Dia"}],paging:!0,responsive:!1,info:!0,ordering:!1,language:{url:"../js/DataTableSpanishShort.json?"+vjs()}});a.on("init.dt",(function(a,e){$("#GetFechas thead").remove()})),a.on("draw.dt",(function(a,e){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$("#GetHorasFecha").DataTable().ajax.reload(),$("#GetHorasFechaTotales").DataTable().ajax.reload()}));let e=$("#GetHorasFechaTotales").DataTable({rowGroup:{dataSrc:"Agrup"},bProcessing:!0,serverSide:!0,deferRender:!0,searchDelay:1500,ajax:{url:"GetHorasFechaTotales.php",type:"POST",data:function(a){a._f=$("#_f").val(),a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.Thora=$("#Thora").val(),a.SHoras=$("#SHoras").val(),a.HoraMin=$("#HoraMin").val(),a.HoraMax=$("#HoraMax").val(),a.Calculos=$("#Calculos").val(),a.Tar=$("#Tar").val(),a.Agrup=$(".selectAgrupar").val()},error:function(){$("#GetHorasNew_processing").css("display","none")}},columns:[{class:"ls1 text-center",data:"FicHora"},{class:"w150",data:"THoDesc"},{class:"ls1 bg-light",data:"CalcHoras"},{class:"w-100",data:"null"}],scrollX:!0,scrollCollapse:!1,paging:!1,responsive:!1,info:!1,searching:!1,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json?"+vjs()}});e.on("init.dt",(function(a,e){$(".CollapseFiltros").prop("disabled",!1),$("#Refresh").prop("disabled",!1),$("#trash_all").removeClass("invisible")})),e.on("draw.dt",(function(a,e){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3),$("#GetHorasFechaTotales_wrapper thead").remove()}))}),1e3),$("#Refresh").on("click",(function(){ActualizaTablas()})),$("#_dr").change((function(){ActualizaTablas()})),$("#VerPor").html("Visualizar por Fecha"),$("#Visualizar").change((function(){$("#Visualizar").is(":checked")?($("#GetFechas").DataTable().ajax.reload(),$("#GetHorasTable").addClass("d-none"),$("#GetHorasFechaTable").removeClass("d-none"),$("#GetHorasTotalesTable").addClass("d-none"),$("#pagLega").addClass("d-none"),$("#pagFech").removeClass("d-none")):($("#GetPersonal").DataTable().ajax.reload(),$("#GetHorasTable").removeClass("d-none"),$("#GetHorasFechaTable").addClass("d-none"),$("#GetHorasTotalesTable").removeClass("d-none"),$("#pagLega").removeClass("d-none"),$("#pagFech").addClass("d-none"))}));