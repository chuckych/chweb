function ActualizaTablas(){$("#Visualizar").is(":checked")?$("#GetFechas").DataTable().ajax.reload():($("#GetPersonal").DataTable().ajax.reload(),$("#Per2").addClass("d-none"),$(".pers_legajo").removeClass("d-none"))}var map={17:!1,18:!1,32:!1,16:!1,39:!1,37:!1,13:!1,27:!1};function CheboxChecked(a){$(a).val(0),$(a).change((function(){$(a).is(":checked")?$(a).val(1):$(a).val(0)}))}$(document).keydown((function(a){a.keyCode in map&&(map[a.keyCode]=!0,map[32]&&$("#Filtros").modal("show")),a.keyCode in map&&(map[a.keyCode]=!0,map[27]&&$("#Filtros").modal("hide")),a.keyCode in map&&(map[a.keyCode]=!0,map[39]&&($("#Visualizar").is(":checked")?$("#GetFechas").DataTable().page("next").draw("page"):$("#GetPersonal").DataTable().page("next").draw("page"))),a.keyCode in map&&(map[a.keyCode]=!0,map[37]&&($("#Visualizar").is(":checked")?$("#GetFechas").DataTable().page("previous").draw("page"):$("#GetPersonal").DataTable().page("previous").draw("page")))})).keyup((function(a){a.keyCode in map&&(map[a.keyCode]=!1)})),$("#pagFech").addClass("d-none"),$("#GetFichadasFechaTable").addClass("d-none"),$("#datoFicFalta").val("0"),CheboxChecked("#FicFalta"),$("#Visualizar").prop("disabled",!0);var GetPersonal=$("#GetPersonal").DataTable({initComplete:function(a,e){$(".dt-buttons").addClass("d-none")},drawCallback:function(a){$("#GetPersonal").removeClass("invisible"),classEfect(".table-responsive","animate__animated animate__fadeIn");a.json.recordsTotal;$("#GetPersonal thead").remove(),$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$("#GetFichadas").DataTable().ajax.reload()},pagingType:"full",lengthMenu:[[1],[1]],bProcessing:!1,serverSide:!0,deferRender:!0,searchDelay:1500,dom:'<"d-inline-flex d-flex align-items-center"t<"ml-2"p>><"mt-n3 d-flex justify-content-end"i>',ajax:{url:"/"+$("#_homehost").val()+"/fichadas/GetPersonalFichas.php?_c="+$("#_c").val()+"&_r="+$("#_r").val(),type:"POST",data:function(a){a._l=$("#_l").val(),a.Per=$("#Per").val(),a.Per2=$("#Per2").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a.FicFalta=$("#FicFalta").val()},error:function(){$("#GetPersonal_processing").css("display","none")}},columns:[{class:"w80 px-3 border fw4 bg-light radius pers_legajo",data:"pers_legajo"},{class:"w300 px-3 border border-left-0 fw4 bg-light radius",data:"pers_nombre"}],paging:!0,responsive:!1,info:!0,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json"}}),GetFichadas=$("#GetFichadas").DataTable({initComplete:function(a,e){$(".dataTables_length").hide(),$("#Refresh").prop("disabled",!1),$("#trash_all").removeClass("invisible"),setTimeout((function(){$(".dt-button").addClass("btn btn-sm btn-outline-custom fontq border"),$(".dt-button").removeClass("dt-button buttons-csv buttons-html5"),$(".dt-buttons").removeClass("d-none"),$(".dt-button").removeAttr("style")}),500)},drawCallback:function(a){classEfect("#GetFichadasTable","animate__animated animate__fadeIn"),$(".dataTables_length").show(),$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),$("#GetFichadasTable").show(),setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3)},lengthMenu:[[30,60,90,120],[30,60,90,120]],bProcessing:!0,serverSide:!0,deferRender:!0,ajax:{url:"/"+$("#_homehost").val()+"/fichadas/GetFichadas.php?_c="+$("#_c").val()+"&_r="+$("#_r").val(),type:"POST",data:function(a){a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.FicFalta=$("#FicFalta").val()},error:function(){$("#GetFichadas").css("display","none")}},columns:[{data:"Fic_Lega"},{data:"Fic_Nombre"},{class:"text-center ls1",data:"Primera"},{class:"text-center ls1",data:"Ultima"},{data:"num_dia"},{class:"ls1",data:"Fecha"},{class:"ls1",data:"Fic_horario"},{class:"ls1",data:"Fichadas"},{class:"",data:"null"}],scrollX:!0,scrollCollapse:!0,scrollY:"25vmax",paging:!0,info:!0,searching:!1,ordering:!1,language:{url:"../js/DataTableSpanishShort.json"}});setTimeout((function(){$("#GetFechas").DataTable({initComplete:function(a,e){$("#GetFechas").removeClass("invisible"),$("#GetFechas thead").remove(),$("#GetFichadasFechaTable").removeClass("invisible")},drawCallback:function(a){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$("#GetFichadasFecha").DataTable().ajax.reload(),$("#GetFichadasFechaTotales").DataTable().ajax.reload()},pagingType:"full",lengthMenu:[[1],[1]],bProcessing:!1,serverSide:!0,deferRender:!0,searchDelay:1500,dom:'<"d-inline-flex d-flex align-items-center"t<"ml-2"p>><"mt-n3 d-flex justify-content-end"i>',ajax:{url:"/"+$("#_homehost").val()+"/fichadas/GetFechasRegistro.php?_c="+$("#_c").val()+"&_r="+$("#_r").val(),type:"POST",data:function(a){a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.FicFalta=$("#FicFalta").val()},error:function(){$("#GetFecha_processing").css("display","none")}},columns:[{class:"w80 px-3 border fw4 bg-light radius ls1",data:"FicFech"},{class:"w300 px-3 border fw4 bg-light radius",data:"Dia"}],paging:!0,responsive:!1,info:!0,ordering:!1,language:{url:"../js/DataTableSpanishShort2.json"}}),$("#GetFichadasFecha").DataTable({initComplete:function(a,e){$("#GetFichadasFecha").removeClass("invisible"),setTimeout((function(){$(".dt-button").addClass("btn btn-sm btn-outline-custom fontq border"),$(".dt-button").removeClass("dt-button buttons-csv buttons-html5"),$(".dt-buttons").removeClass("d-none"),$(".dt-button").removeAttr("style")}),500)},drawCallback:function(a){$(".page-link").addClass("border border-0"),$(".dataTables_info").addClass("text-secondary"),$(".custom-select").addClass("text-secondary bg-light"),$("#Visualizar").prop("disabled",!1),setTimeout((function(){$(".Filtros").prop("disabled",!1)}),1e3)},lengthMenu:[[10,25,50,100,200,300],[10,25,50,100,200,300]],bProcessing:!0,serverSide:!0,deferRender:!0,ajax:{url:"/"+$("#_homehost").val()+"/fichadas/GetFichadasFecha.php?_c="+$("#_c").val()+"&_r="+$("#_r").val(),type:"POST",data:function(a){a._f=$("#_f").val(),a.Per=$("#Per").val(),a.Tipo=$("#Tipo").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a._dr=$("#_dr").val(),a._l=$("#_l").val(),a.FicFalta=$("#FicFalta").val()},error:function(){$("#GetFichadasFecha_processing").css("display","none")}},columns:[{data:"Fic_Lega"},{data:"Fic_Nombre"},{class:"text-center ls1",data:"Primera"},{class:"text-center ls1",data:"Ultima"},{data:"num_dia"},{class:"ls1",data:"Fecha"},{class:"ls1",data:"Fic_horario"},{class:"ls1",data:"Fichadas"},{class:"",data:"null"}],scrollX:!0,scrollCollapse:!0,scrollY:"25vmax",paging:!0,info:!0,searching:!1,ordering:!1,language:{url:"../js/DataTableSpanishShort.json"}})}),1e3),$("#Refresh").on("click",(function(a){a.preventDefault(),ActualizaTablas()})),$("#_dr").change((function(a){a.preventDefault(),ActualizaTablas()})),$("#VerPor").html("Visualizar por Fecha"),$("#Visualizar").change((function(){$("#Visualizar").is(":checked")?($("#GetFechas").DataTable().ajax.reload(),$("#GetFichadasTable").addClass("d-none"),$("#GetFichadasFechaTable").removeClass("d-none"),$("#pagLega").addClass("d-none"),$("#pagFech").removeClass("d-none")):($("#GetPersonal").DataTable().ajax.reload(),$("#GetFichadasTable").removeClass("d-none"),$("#GetFichadasFechaTable").addClass("d-none"),$("#pagLega").removeClass("d-none"),$("#pagFech").addClass("d-none"))}));