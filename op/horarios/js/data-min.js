$((function(){var a=function(a){return a=a.split(":"),parseInt(a[0])>19?"HZ:M0":"H0:M0"};function t(){$("#Horale1").DataTable().ajax.reload(null,!1),$("#Horale2").DataTable().ajax.reload(null,!1),$("#Rotacion").DataTable().ajax.reload(null,!1),n($("#divData .NumLega").text())}function e(a,t){$(t).dataTable({initComplete:function(a){$("#tableHorarios_wrapper thead").remove(),$(t).show(),$(t+"_filter .form-control").attr("placeholder","Buscar Horario")},drawCallback:function(a){$("#tableHorarios_wrapper thead").remove(),classEfect("#tableHorarios_wrapper","animate__animated animate__fadeIn"),setTimeout((()=>{$("#actModal").modal("show")}),100)},createdRow:function(a,t,e){$(a).addClass("animate__animated animate__fadeIn pointer")},ajax:{url:"getHorale.php",type:"POST",dataType:"json",data:function(t){t.datos=a},error:function(){$(t).css("display","none")}},columns:[{className:"text-center align-middle select",targets:"HorCodi",title:"",render:function(a,t,e,o){return'<span id="H'+e.HorCodi+'H" class="select" title="Código de Horario">'+e.HorCodi+"</span>"}},{className:"align-middle w-100 select",targets:"HorDesc",title:"",render:function(a,t,e,o){return'<span class="select" title="Horario">'+e.HorDesc+"</span>"}},{className:"text-center align-middle select",targets:"HorID",title:"",render:function(a,t,e,o){return'<span class="select" title="ID">'+e.HorID+"</span>"}}],scrollY:"200px",scrollX:!0,scrollCollapse:!0,deferRender:!0,bProcessing:!1,serverSide:!0,paging:!0,searching:!0,info:!0,ordering:!1,responsive:!1,language:{sProcessing:"Actualizando . . .",sLengthMenu:"_MENU_",sZeroRecords:"",sEmptyTable:"",sInfo:"Mostrando _START_ al _END_ de _TOTAL_ Horarios",sInfoEmpty:"No se encontraron resultados",sInfoFiltered:"(filtrado de un total de _MAX_ Horarios)",sInfoPostFix:"",sSearch:"",sUrl:"",sInfoThousands:",",oPaginate:{sFirst:"<i class='bi bi-chevron-left'></i>",sLast:"<i class='bi bi-chevron-right'></i>",sNext:"<i class='bi bi-chevron-right'></i>",sPrevious:"<i class='bi bi-chevron-left'></i>"},sLoadingRecords:"<div class='spinner-border text-light'></div>"}})}function o(a,t){$(t).dataTable({initComplete:function(a){$("#tableHorarios_wrapper thead").remove(),$(t).show(),$(t+"_filter .form-control").attr("placeholder","Buscar Rotación")},drawCallback:function(a){$("#tableHorarios_wrapper thead").remove(),classEfect("#tableHorarios_wrapper","animate__animated animate__fadeIn"),$("#actModal").modal("show")},createdRow:function(a,t,e){$(a).addClass("animate__animated animate__fadeIn pointer")},ajax:{url:"getHorale.php",type:"POST",dataType:"json",data:function(t){t.datos=a},error:function(){$(t).css("display","none")}},columns:[{className:"text-center align-middle select",targets:"RotCodi",title:"",render:function(a,t,e,o){return'<span id="H'+e.RotCodi+'H" class="select" title="Código de Rotación">'+e.RotCodi+"</span>"}},{className:"align-middle w-100 select",targets:"RotDesc",title:"",render:function(a,t,e,o){return'<span class="select" title="Rotación">'+e.RotDesc+"</span>"}}],scrollY:"200px",scrollX:!0,scrollCollapse:!0,deferRender:!0,bProcessing:!1,serverSide:!1,paging:!1,searching:!0,info:!0,ordering:!1,responsive:!1,language:{sProcessing:"Actualizando . . .",sLengthMenu:"_MENU_",sZeroRecords:"",sEmptyTable:"",sInfo:"Mostrando _START_ al _END_ de _TOTAL_ Horarios",sInfoEmpty:"No se encontraron resultados",sInfoFiltered:"(filtrado de un total de _MAX_ Horarios)",sInfoPostFix:"",sSearch:"",sUrl:"",sInfoThousands:",",oPaginate:{sFirst:"<i class='bi bi-chevron-left'></i>",sLast:"<i class='bi bi-chevron-right'></i>",sNext:"<i class='bi bi-chevron-right'></i>",sPrevious:"<i class='bi bi-chevron-left'></i>"},sLoadingRecords:"<div class='spinner-border text-light'></div>"}})}function i(a,e){$(e).dataTable({initComplete:function(a){$(e+" thead").remove()},drawCallback:function(a){$(e+" thead").remove();let i='<div>Rotaciones: <span class="ls1">('+a.aiDisplay.length+")</span></div>",n='<button title="Nueva asignación" class="btn btn-sm px-2 pointer border btn-custom c_rotacion"><i class="bi bi-plus"></i></button>';0==a.aiDisplay.length?(i='<div class="fw4">Sin Rotación asignada</div>',$("#titleRotaciones").html(i+n),$(e).hide()):($(e).show(),$("#titleRotaciones").html(i+n)),$(".viewRot").click((function(){let a=$(e).DataTable().row($(this).parents("tr")).data();!function(a,t,e,o){$.ajax({dataType:"json",type:"POST",url:"getHorale.php",data:{datos:a},beforeSend:function(a){},success:function(a){let i=o,n=e,s=t;$(".RotaDeta").html('\n                <div class="toast-header d-flex justify-content-between animate__animated animate__fadeIn py-2 text-dark">\n                    <div class\'w-100 fw5\'>\n                        <div class="mr-auto fw5 fonth animate__animated animate__fadeIn">'+i+'</div>\n                        <div class="fontq text-dark">Desde el día '+s+'</div>\n                        <div class="fontq text-dark">Comenzando el día '+n+' de la rotación</div>\n                    </div>\n                    <div>\n                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                            <span aria-hidden="true"> <i class="bi bi-x"></i> </span>\n                        </button>\n                    </div>\n                </div>\n                <div class="toast-body animate__animated animate__fadeIn"></div>\n                '),$(".RotaDeta").toast("show"),$.each(a,(function(a,t){let e=a+1;$(".RotaDeta .toast-body").append('\n                        <div class="fontq mb-1">\n                            <span class="fw5">'+e+". Horario. ("+t.RotHora+") "+t.HorDesc+'</span><br>\n                            <span class="">Durante '+t.RotDias+" días.</span><br>\n                        </div>\n                    ")}))}})}(JSON.stringify({RoLRota:a.RoLRota,nombre:"",legajo:"",tabla:"RotaDeta"}),a.RoLFech,a.RoLDias,a.RotDesc)})),$(".c_rotacion").click((function(){$(".RotaDeta").toast("hide"),CheckSesion(),$("#actModal .modal-title").html("Nueva asignación de Rotación"),getHTML("bodyHorale1.html","#actModalbody"),setTimeout((()=>{$("#H1Horario label").html("Rotación"),$("#H1Horario").prepend('\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeInDown mb-2">\n                        <label class="fontq w80">Fecha:</label>\n                            <input type="text" class="form-control text-center h40 w120 ml-2" name="RotFecha" id="inputRotFecha">\n                        </div>\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeInDown mb-2">\n                        <label class="fontq w80">Día de Comienzo:</label>\n                            <input type="tel" class="form-control text-center h40 w120 ml-2" name="RotDia" id="inputRotDia" value=\'1\'>\n                        </div>\n                        '),singleDatePicker("#inputRotFecha","right","down"),$("#H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+$("#divData .NumLega").text()+") "+$("#divData .ApNo").text()+"</span>"),$("#inputH1Legajo").val($("#divData .NumLega").text()),$("#inputH1Codhor").mask("0000"),$("#inputRotDia").mask("000"),$("#inputTipo").val("c_rotacion"),$("#divtableHorarios").html(""),$("#divtableHorarios").html('\n                                <table id="tableHorarios" class="table text-nowrap mt-2 w-100 border border-top-0 table-hover"></table>\n                            ');let a=JSON.stringify({nombre:"",legajo:"",tabla:"ListRotaciones"});setTimeout((()=>{o(a,"#tableHorarios"),$("#tableHorarios tbody").on("click",".select",(function(a){a.preventDefault();let t=$("#tableHorarios").DataTable().row($(this).parents("tr")).data();$("#inputH1Codhor").val(t.RotCodi),$("#inputH1horario").val(t.RotDesc),classEfect("#inputH1Codhor","fw5 border-info"),classEfect("#inputH1horario","fw5 border-info"),a.stopImmediatePropagation()}))}),100)}),200)})),$(".actModalRot").click((function(){CheckSesion(),$(".RotaDeta").toast("hide");let a=$(e).DataTable().row($(this).parents("tr")).data();$("#actModal .modal-title").html("Editar Asignación de Rotación"),getHTML("bodyHorale1.html","#actModalbody"),setTimeout((()=>{$("#H1Horario label").html("Rotación"),$("#H1Horario").prepend('\n                        <input type="hidden" readonly class="form-control text-center h40 w120 ml-2" name="RotFecha" id="inputRotFecha">\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeInDown mb-2">\n                        <label class="fontq w80">Día de Comienzo:</label>\n                            <input type="tel" class="form-control text-center h40 w120 ml-2" name="RotDia" id="inputRotDia" value=\'1\'>\n                        </div>\n                        '),$("#inputRotFecha").val(a.RoLFech),$("#H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+a.RoLLega+") "+a.ApNo+"</span>"),$("#H1Fecha").html('<label class="w60 fontq">Desde:</label><span class="fw5 ls1">'+a.RoLFech+"</span>"),$("#inputH1Codhor").val(a.RoLRota),$("#inputH1Codhor2").val(a.RoLRota),$("#inputH1Legajo").val(a.RoLLega),$("#inputRotDia").val(a.RoLDias),$("#inputTipo").val("u_rotacion"),$("#inputH1Codhor").mask("0000"),$("#inputH1horario").val(a.RotDesc),$("#divtableHorarios").html(""),$("#divtableHorarios").html('\n                                <table id="tableHorarios" class="table text-nowrap mt-2 w-100 border border-top-0 table-hover"></table>\n                            ');let t=JSON.stringify({nombre:"",legajo:"",tabla:"ListRotaciones"});setTimeout((()=>{o(t,"#tableHorarios"),$("#tableHorarios tbody").on("click",".select",(function(a){a.preventDefault();let t=$("#tableHorarios").DataTable().row($(this).parents("tr")).data();$("#inputH1Codhor").val(t.RotCodi),$("#inputH1horario").val(t.RotDesc),classEfect("#inputH1Codhor","fw5 border-info"),classEfect("#inputH1horario","fw5 border-info"),a.stopImmediatePropagation()}))}),100)}),200)})),$(".RotDelete").click((function(){$(".RotaDeta").toast("hide");let a=$(e).DataTable().row($(this).parents("tr")).data();bootbox.confirm({message:'<span class="fonth fw5">¿Eliminar asignación de Rotación?</span><br>\n                        <div class="fontq mt-3">\n                            <p class="p-0 m-0"><label class="w60 fontq">Legajo:</label><span class="fw5">('+a.RoLLega+") "+a.ApNo+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Fecha:</label><span class="fw5">'+a.RoLFech+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Horario:</label><span class="fw5">('+a.RoLRota+") "+a.RotDesc+"</span></p>\n                        </div>\n                        ",buttons:{confirm:{label:"Aceptar",className:"btn-custom text-white btn-sm fontq submit"},cancel:{label:"Cancelar",className:"btn-light btn-sm fontq text-secondary"}},callback:function(e){if(e){let e='<div class="spinner-border fontppp" role="status" style="width: 15px; height:15px" ></div>';$.ajax({type:"POST",url:"crud.php",data:{NumLega:a.RoLLega,Fecha:a.RoLFech,Codhor:a.RoLRota,tipo:"d_rotacion"},beforeSend:function(a){$.notifyClose(),ActiveBTN(!0,".submit","Aguarde..","Aceptar"),notify('Procesando <span class = "dotting mr-1"> </span> '+e,"info",0,"right")},success:function(a){"ok"==a.status?(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"success",5e3,"right"),t()):(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"danger",5e3,"right"))}})}}})})),s("#form","crud.php"),$.each(a.json,(function(a,t){"_aTur"==a?1===t?$(".c_rotacion").prop("disabled",!1):$(".c_rotacion").prop("disabled",!0):"_mTur"==a?1===t?$(".actModalRot").prop("disabled",!1):$(".actModalRot").prop("disabled",!0):"_bTur"==a&&(1===t?$(".RotDelete").prop("disabled",!1):$(".RotDelete").prop("disabled",!0))}))},createdRow:function(a,t,e){$(a).addClass("animate__animated animate__fadeIn")},ajax:{url:"getHorale.php",type:"POST",dataType:"json",data:function(t){t.datos=a},error:function(){$(e).css("display","none")}},columns:[{className:"align-middle",targets:"RoLFech",title:"Fecha",render:function(a,t,e,o){return e.RoLFech}},{className:"align-middle",targets:"RoLRota",title:"Fecha",render:function(a,t,e,o){return e.RoLRota}},{className:"viewRot pointer w-100 align-middle",targets:"RotDesc",title:"",render:function(a,t,e,o){return'<span title="Rotación">'+e.RotDesc+"</span>"}},{className:"align-middle",targets:"",title:"",render:function(a,t,e,o){let i=JSON.stringify({horario:e.CodHor,legajo:e.Legajo,fecha:e.FechaStr,tabla:"Desde"});return'\n                        <div class="btn-group dropleft float-right">\n                            <button type="button" class="btn btn-sm fontq text-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                                <i class="bi bi-three-dots-vertical"></i>\n                            </button>\n                            <div class="dropdown-menu p-0 border-0" style="width:60px !important">\n                                <button data="'+i+'" title="Editar Rotación" class="actModalRot float-right btn btn-outline-custom border mx-1 btn-sm fontq"><i class="bi bi-pencil"></i></button>\n                                <button  data="'+i+'" title="Eliminar Rotación" class="RotDelete float-right btn btn-outline-danger border btn-sm fontq"><i class="bi bi-trash"></i></button>\n                            </div>\n                        </div>\n                        '}}],deferRender:!0,bProcessing:!1,serverSide:!1,paging:!1,searching:!1,info:!1,ordering:!1,responsive:!1,language:{url:"/"+_homehost+"/js/DataTableSpanishShort2.json"}})}function n(a){$.ajax({dataType:"json",type:"POST",url:"getHorario.php",data:{Legajo:a},beforeSend:function(a){$("#divHorarioActual").html('\n                <div class="d-inline-flex w-100 align-items-center h40 shadow-sm border">\n                    <div class="w150 fontq h40 d-flex align-items-center justify-content-center bg-light fw4 text-dark border">Horario Actual: </div>\n                    <div class="fontq w-100 h40 d-flex align-items-center px-2"></div>\n                </div>\n            ')},success:function(a){$("#divHorarioActual").html('\n                    <div class="d-inline-flex w-100 align-items-center h40 shadow-sm border">\n                        <div class="w150 fontq h40 d-flex align-items-center justify-content-center bg-light fw4 text-dark border">Horario Actual: </div>\n                        <div class="fontq w-100 h40 d-flex align-items-center fw4 px-2 animate__animated animate__fadeIn">'+a.Mensaje+"</div>\n                    </div>\n                ")}})}function s(a,e){CheckSesion();$(a).bind("submit",(function(a){a.preventDefault(),$.ajax({type:$(this).attr("method"),url:e,data:$(this).serialize(),cache:!1,beforeSend:function(a){$.notifyClose(),ActiveBTN(!0,"#submit","Aguarde..","Aceptar"),notify('Procesando <span class = "dotting mr-1"> </span> <div class="spinner-border fontppp" role="status" style="width: 15px; height:15px" ></div>',"info",0,"right")},success:function(a){"ok"==a.status?(ActiveBTN(!1,"#submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"success",5e3,"right"),t(),$("#actModal").modal("hide")):(ActiveBTN(!1,"#submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"danger",5e3,"right"))}}),a.stopImmediatePropagation()}))}function l(){$("#formCit").bind("submit",(function(a){a.preventDefault(),$.ajax({type:$(this).attr("method"),url:"../../general/insert.php",data:$(this).serialize(),cache:!1,beforeSend:function(a){CheckSesion(),$.notifyClose(),ActiveBTN(!0,"#submit","Aguarde..","Aceptar"),notify('Procesando <span class = "dotting mr-1"> </span> <div class="spinner-border fontppp" role="status" style="width: 15px; height:15px" ></div>',"info",0,"right")},success:function(a){if("ok"==a.status){ActiveBTN(!1,"#submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"success",5e3,"right"),$("#Citacion").DataTable().ajax.reload(null,!1),$("#actModalCit").modal("hide"),n($("#divData .NumLega").text())}else ActiveBTN(!1,"#submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"danger",5e3,"right")}}),a.stopImmediatePropagation()}))}spOptions={onKeyPress:function(t,e,o,i){o.mask(a.apply({},arguments),i)},translation:{H:{pattern:/[0-2]/,optional:!1},Z:{pattern:/[0-3]/,optional:!1},M:{pattern:/[0-5]/,optional:!1}}},$("#_eg").click((function(){CheckSesion(),$("#detalleHorario").hide(),$("#divHorarioActual").hide(),$("#_eg").is(":checked")?($("#_eg").val("on").trigger("change"),$("#tablePersonal").DataTable().ajax.reload()):($("#_eg").val("off").trigger("change"),$("#tablePersonal").DataTable().ajax.reload())})),$("#_porApNo").click((function(){CheckSesion(),$("#detalleHorario").hide(),$("#divHorarioActual").hide(),$("#_porApNo").is(":checked")?($("#_porApNo").val("on").trigger("change"),$("#tablePersonal").DataTable().ajax.reload()):($("#_porApNo").val("off").trigger("change"),$("#tablePersonal").DataTable().ajax.reload())})),$("#tablePersonal").dataTable({initComplete:function(a){setTimeout((()=>{$("#PersonalTable").removeClass("invisible")}),100),classEfect("#PersonalTable","animate__animated animate__fadeIn"),$("#tablePersonal_filter .form-control").attr("placeholder","Buscar")},drawCallback:function(a){$("td").tooltip({container:"table"}),$('[data-toggle="tooltip"]').tooltip(),$("#_eg").is(":checked")?$("td").addClass("text-danger"):$("td").removeClass("text-danger")},bProcessing:!0,serverSide:!0,deferRender:!0,stateSave:!0,stateDuration:-1,ajax:{url:"getPersonal.php",type:"POST",dataType:"json",data:function(a){a._eg=$("input[name=_eg]:checked").val(),a._porApNo=$("input[name=_porApNo]:checked").val(),a.Per=$("#Per").val(),a.Emp=$("#Emp").val(),a.Plan=$("#Plan").val(),a.Sect=$("#Sect").val(),a.Sec2=$("#Sec2").val(),a.Grup=$("#Grup").val(),a.Sucur=$("#Sucur").val(),a.Tipo=$("#Tipo").val(),a.Tare=$("#Tare").val(),a.Conv=$("#Conv").val(),a.Regla=$("#Regla").val()},error:function(){$("#tablePersonal").css("display","none")}},createdRow:function(a,t,e){$(a).addClass("animate__animated animate__fadeIn pointer")},columns:[{className:"view",targets:"pers_legajo",title:"Legajo",render:function(a,t,e,o){return e.pers_legajo}},{className:"w-100 view",targets:"pers_nombre",title:"Apellido y Nombre",render:function(a,t,e,o){return e.pers_nombre}}],paging:!0,searching:!0,info:!0,ordering:0,responsive:0,language:{sProcessing:"Actualizando . . .",sLengthMenu:"_MENU_",sZeroRecords:"",sEmptyTable:"",sInfo:"_START_ al _END_ de _TOTAL_ Legajos",sInfoEmpty:"No se encontraron resultados",sInfoFiltered:"<br>(Filtrado de un total de _MAX_)",sInfoPostFix:"",sSearch:"",sUrl:"",sInfoThousands:",",sLoadingRecords:"<div class='spinner-border text-light'></div>",oPaginate:{sFirst:"<i class='bi bi-chevron-left'></i>",sLast:"<i class='bi bi-chevron-right'></i>",sNext:"<i class='bi bi-chevron-right'></i>",sPrevious:"<i class='bi bi-chevron-left'></i>"},oAria:{sSortAscending:":Activar para ordenar la columna de manera ascendente",sSortDescending:":Activar para ordenar la columna de manera descendente"}}}),$("#tablePersonal tbody").on("click",".view",(function(o){o.preventDefault(),CheckSesion(),getHTML("actModal.html","#divactModal"),getHTML("actModalCit.html","#divactModalCit"),$("tr").removeClass("table-active"),$(this).parents("tr").addClass("table-active");let r=$("#tablePersonal").DataTable().row($(this).parents("tr")).data();$("#detalleHorario").hide(),$("#detalleHorario").html('\n        <div class="divTablas">\n            <div class="shadow-sm border mb-2">\n                <div class="p-2 border-bottom-0 fontq d-inline-flex w-100 justify-content-between align-items-center bg-light text-dark fw4" id="titleDesde">Horarios Desde</div>\n                <div class="overflow-auto w-100 table-responsive" style="max-height:150px">\n                    <table class="table w-100 text-wrap" id="Horale1"></table>\n                </div>\n            </div>\n            <div class="shadow-sm border mb-2">\n                <div class="p-2 border-bottom-0 fontq d-inline-flex w-100 justify-content-between align-items-center bg-light text-dark fw4" id="titleDesdeHasta">Horarios Desde Hasta</div><div class="overflow-auto w-100 table-responsive" style="max-height:150px">\n                    <table class="table text-wrap w-100" id="Horale2"></table>\n                </div>\n            </div>\n            <div class="shadow-sm border mb-2">\n                <div class="p-2 border-bottom-0 fontq d-inline-flex w-100 justify-content-between align-items-center bg-light text-dark fw4" id="titleRotaciones">Rotaciones</div><div class="overflow-auto w-100 table-responsive" style="max-height:150px">\n                    <table class="table text-wrap w-100" id="Rotacion"></table>\n                </div>\n            </div>\n            <div class="toast RotaDeta border-0" role="alert" aria-live="polite" data-autohide="false" aria-atomic="true">\n            </div>\n        </div>\n        <button class="btn border btn-sm btn-custom fontq cita float-right px-4 mt-2">Citaciones</button>\n        '),$("#divData").html('<div class="mb-2 p-2 border shadow-sm animate__animated animate__fadeIn">\n            <p class="fontq m-0 p-0">\n            <label class="w60 fontq mb-1">Legajo: </label><span class="fw5 NumLega">'+r.pers_legajo+'</span></p><p class="fontq m-0 p-0"><label class="w60 fontq mb-0">Nombre: </label><span class="fw5 ApNo">'+r.pers_nombre+"</span>\n        </div>"),n(r.pers_legajo);let c=JSON.stringify({nombre:r.pers_nombre,legajo:r.pers_legajo,tabla:"Desde"}),d=JSON.stringify({nombre:r.pers_nombre,legajo:r.pers_legajo,tabla:"DesdeHasta"}),p=JSON.stringify({nombre:r.pers_nombre,legajo:r.pers_legajo,tabla:"Citacion"}),b=JSON.stringify({nombre:r.pers_nombre,legajo:r.pers_legajo,tabla:"Rotacion"});var m,u;m=c,u="#Horale1",$(u).dataTable({initComplete:function(a){$(u+" thead").remove()},drawCallback:function(a){$(u+" thead").remove();let o='<div>Horarios Desde: <span class="ls1">('+a.aiDisplay.length+")</span></div>",i='<button title="Nueva asignación" class="btn btn-sm px-2 pointer border btn-custom c_horale1"><i class="bi bi-plus"></i></button>';if(0==a.aiDisplay.length){let a='<div class="fw4">Sin Horario Desde asignado.</div>';$("#titleDesde").html(a+i),$(u).hide()}else $(u).show(),$("#titleDesde").html(o+i);$(".c_horale1").click((function(){CheckSesion(),a.json.data[0],$("#actModal .modal-title").html("Nueva Asignación"),getHTML("bodyHorale1.html","#actModalbody"),setTimeout((()=>{$("#H1Horario").prepend('\n                        <label class="fontq">Fecha desde:</label>\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeInDown mb-2">\n                            <input type="text" class="form-control text-center h40 w150" name="FDesde" id="inputH1FDesde">\n                        </div>\n                        '),singleDatePicker("#inputH1FDesde","right","down"),$("#H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+$("#divData .NumLega").text()+") "+$("#divData .ApNo").text()+"</span>"),$("#inputH1Legajo").val($("#divData .NumLega").text()),$("#inputH1Codhor").mask("0000"),$("#inputTipo").val("c_horale1"),$("#divtableHorarios").html(""),$("#divtableHorarios").html('\n                                <table id="tableHorarios" class="table text-nowrap mt-2 w-100 border border-top-0 table-hover"></table>\n                            ');let a=JSON.stringify({nombre:"",legajo:"",tabla:"ListHorarios"});setTimeout((()=>{e(a,"#tableHorarios"),$("#tableHorarios tbody").on("click",".select",(function(a){a.preventDefault();let t=$("#tableHorarios").DataTable().row($(this).parents("tr")).data();$("#inputH1Codhor").val(t.HorCodi),$("#inputH1horario").val(t.HorDesc),classEfect("#inputH1Codhor","fw5 border-info"),classEfect("#inputH1horario","fw5 border-info"),a.stopImmediatePropagation()}))}),100)}),300),s("#form","crud.php")})),$(".actModal").click((function(){CheckSesion();let a=$(u).DataTable().row($(this).parents("tr")).data();$("#actModal .modal-title").html("Editar Asignación"),getHTML("bodyHorale1.html","#actModalbody"),setTimeout((()=>{$("#H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+a.Legajo+") "+a.ApNo+"</span>"),$("#H1Fecha").html('<label class="w60 fontq">Desde:</label><span class="fw5 ls1">'+a.Fecha+"</span>"),$("#inputH1Codhor").val(a.CodHor),$("#inputH1Codhor2").val(a.CodHor),$("#inputH1Legajo").val(a.Legajo),$("#inputTipo").val("u_horale1"),$("#inputH1Fecha").val(a.FechaStr),$("#inputH1Codhor").mask("0000"),$("#inputH1horario").val(a.Horario),$("#divtableHorarios").html(""),$("#divtableHorarios").html('\n                                <table id="tableHorarios" class="table text-nowrap mt-2 w-100 border border-top-0 table-hover"></table>\n                            ');let t=JSON.stringify({nombre:"",legajo:"",tabla:"ListHorarios"});setTimeout((()=>{e(t,"#tableHorarios"),$("#tableHorarios tbody").on("click",".select",(function(a){a.preventDefault();let t=$("#tableHorarios").DataTable().row($(this).parents("tr")).data();$("#inputH1Codhor").val(t.HorCodi),$("#inputH1horario").val(t.HorDesc),classEfect("#inputH1Codhor","fw5 border-info"),classEfect("#inputH1horario","fw5 border-info"),a.stopImmediatePropagation()}))}),100)}),300),s("#form","crud.php")})),$(".horale1Delete").click((function(){let a=$(u).DataTable().row($(this).parents("tr")).data();bootbox.confirm({message:'<span class="fonth fw5">¿Eliminar asignación Desde?</span><br>\n                        <div class="fontq mt-3">\n                            <p class="p-0 m-0"><label class="w60 fontq">Legajo:</label><span class="fw5">('+a.Legajo+") "+a.ApNo+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Fecha:</label><span class="fw5">'+a.Fecha+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Horario:</label><span class="fw5">('+a.CodHor+") "+a.Horario+"</span></p>\n                        </div>\n                        ",buttons:{confirm:{label:"Aceptar",className:"btn-custom text-white btn-sm fontq submit"},cancel:{label:"Cancelar",className:"btn-light btn-sm fontq text-secondary"}},callback:function(e){if(e){let e='<div class="spinner-border fontppp" role="status" style="width: 15px; height:15px" ></div>';$.ajax({type:"POST",url:"crud.php",data:{NumLega:a.Legajo,Fecha:a.FechaStr,Codhor:a.CodHor,tipo:"d_horale1"},beforeSend:function(a){$.notifyClose(),ActiveBTN(!0,".submit","Aguarde..","Aceptar"),notify('Procesando <span class = "dotting mr-1"> </span> '+e,"info",0,"right")},success:function(a){"ok"==a.status?(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"success",5e3,"right"),t()):(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"danger",5e3,"right"))}})}}})})),$.each(a.json,(function(a,t){"_aTur"==a?1===t?$(".c_horale1").prop("disabled",!1):$(".c_horale1").prop("disabled",!0):"_mTur"==a?1===t?$(".actModal").prop("disabled",!1):$(".actModal").prop("disabled",!0):"_bTur"==a?1===t?$(".horale1Delete").prop("disabled",!1):$(".horale1Delete").prop("disabled",!0):"TotalCit"==a&&(t>0?$(".cita").html("Citaciones ("+t+")"):$(".cita").html("Citaciones (0)"))}))},createdRow:function(a,t,e){$(a).addClass("animate__animated animate__fadeIn")},ajax:{url:"getHorale.php",type:"POST",dataType:"json",data:function(a){a.datos=m},error:function(){$(u).css("display","none")}},columns:[{className:"align-middle",targets:"Fecha",title:"Desde",render:function(a,t,e,o){return'<span title="Fecha Desde">'+e.Fecha+"</span>"}},{className:"align-middle",targets:"CodHor",title:"",render:function(a,t,e,o){return'<span title="Código de Horario">'+e.CodHor+"</span>"}},{className:"viewHor align-middle w-100",targets:"Horario",title:"Horario",render:function(a,t,e,o){return'<span class="" title="Horario">'+e.Horario+"</span>"}},{className:"align-middle",targets:"",title:"",render:function(a,t,e,o){let i=JSON.stringify({horario:e.CodHor,legajo:e.Legajo,fecha:e.FechaStr,tabla:"Desde"});return'\n                        <div class="btn-group dropleft float-right">\n                            <button type="button" class="btn btn-sm fontq text-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                                <i class="bi bi-three-dots-vertical"></i>\n                            </button>\n                            <div class="dropdown-menu p-0 border-0" style="width:60px !important">\n                                <button data="'+i+'" title="Editar asignación" class="actModal float-right btn btn-outline-custom border mx-1 btn-sm fontq"><i class="bi bi-pencil"></i></button>\n                                <button  data="'+i+'" title="Eliminar asignación" class="horale1Delete float-right btn btn-outline-danger border btn-sm fontq"><i class="bi bi-trash"></i></button>\n                            </div>\n                        </div>\n                        '}}],deferRender:!0,bProcessing:!1,serverSide:!1,paging:!1,searching:!1,info:!1,ordering:!1,responsive:!1,language:{url:"/"+_homehost+"/js/DataTableSpanishShort2.json"}}),function(a,o){$(o).dataTable({initComplete:function(a){$(o+" thead").remove()},drawCallback:function(a){$(o+" thead").remove();let i='<div>Horarios Desde Hasta: <span class="ls1">('+a.aiDisplay.length+")</span></div>",n='<button title="Nueva asignación" class="btn btn-sm px-2 btn-custom pointer border c_horale2"><i class="bi bi-plus"></i></button>';if(0==a.aiDisplay.length){let a='<div class="fw4">Sin Horario Desde Hasta asignado.</div>';$("#titleDesdeHasta").html(a+n),$(o).hide()}else $(o).show(),$("#titleDesdeHasta").html(i+n);$(".c_horale2").click((function(){CheckSesion(),a.json.data[0],$("#actModal .modal-title").html("Nueva Asignación"),getHTML("bodyHorale1.html","#actModalbody"),setTimeout((()=>{$("#H1Horario").prepend('\n                        <label class="fontq">Fecha desde / hasta:</label>\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeInDown mb-2">\n                            <input type="text" class="form-control text-center h40 w250" name="FDesdeHasta" id="inputH1FDesdeHasta">\n                        </div>\n                        '),dobleDatePicker("#inputH1FDesdeHasta","right","down"),$("#H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+$("#divData .NumLega").text()+") "+$("#divData .ApNo").text()+"</span>"),$("#inputH1Legajo").val($("#divData .NumLega").text()),$("#inputH1Codhor").mask("0000"),$("#inputTipo").val("c_horale2"),$("#divtableHorarios").html(""),$("#divtableHorarios").html('\n                                <table id="tableHorarios" class="table text-nowrap mt-2 w-100 border border-top-0 table-hover"></table>\n                            ');let a=JSON.stringify({nombre:"",legajo:"",tabla:"ListHorarios"});setTimeout((()=>{e(a,"#tableHorarios"),$("#tableHorarios tbody").on("click",".select",(function(a){a.preventDefault();let t=$("#tableHorarios").DataTable().row($(this).parents("tr")).data();$("#inputH1Codhor").val(t.HorCodi),$("#inputH1horario").val(t.HorDesc),classEfect("#inputH1Codhor","fw5 border-info"),classEfect("#inputH1horario","fw5 border-info"),a.stopImmediatePropagation()}))}),100)}),300)})),$(".actModal2").click((function(){CheckSesion();let a=$(o).DataTable().row($(this).parents("tr")).data();$("#actModal .modal-title").html("Editar Asignación"),getHTML("bodyHorale1.html","#actModalbody"),setTimeout((()=>{$("#H1Horario").prepend('\n                        <label class="fontq">Fecha Hasta:</label>\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeInDown mb-2">\n                            <input type="hidden" class="" name="FDesde" id="inputH1FDesde">\n                            <input type="hidden" class="" name="FHasta2" id="inputH1FHasta2">\n                            <input type="text" class="form-control text-center h40 w150" name="FHasta" id="inputH1FHasta">\n                        </div>\n                        '),singleDatePicker("#inputH1FHasta","right","down"),$("#inputH1FHasta").data("daterangepicker").setStartDate(a.Ho2Fec2),$("#inputH1FHasta").data("daterangepicker").setEndDate(a.Ho2Fec2),$("#H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+a.Legajo+") "+a.ApNo+"</span>"),$("#H1Fecha").html('<label class="w60 fontq">Desde:</label><span class="fw5 ls1">'+a.Ho2Fec1+"</span>"),$("#inputH1Codhor").val(a.Ho2Hora),$("#inputH1Codhor2").val(a.Ho2Hora),$("#inputH1Legajo").val(a.Legajo),$("#inputH1FDesde").val(a.Ho2Fec1),$("#inputH1FHasta2").val(a.Ho2Fec2),$("#inputTipo").val("u_horale2"),$("#inputH1Fecha").val(a.FechaStr),$("#inputH1Codhor").mask("0000"),$("#inputH1horario").val(a.HorDesc),$("#divtableHorarios").html(""),$("#divtableHorarios").html('\n                                <table id="tableHorarios" class="table text-nowrap mt-2 w-100 border border-top-0 table-hover"></table>\n                            ');let t=JSON.stringify({nombre:"",legajo:"",tabla:"ListHorarios"});setTimeout((()=>{e(t,"#tableHorarios"),$("#tableHorarios tbody").on("click",".select",(function(a){a.preventDefault();let t=$("#tableHorarios").DataTable().row($(this).parents("tr")).data();$("#inputH1Codhor").val(t.HorCodi),$("#inputH1horario").val(t.HorDesc),classEfect("#inputH1Codhor","fw5 border-info"),classEfect("#inputH1horario","fw5 border-info"),a.stopImmediatePropagation()}))}),200)}),300)})),$.each(a.json,(function(a,t){"_aTur"==a?1===t?$(".c_horale2").prop("disabled",!1):$(".c_horale2").prop("disabled",!0):"_mTur"==a?1===t?$(".actModal2").prop("disabled",!1):$(".actModal2").prop("disabled",!0):"_bTur"==a&&(1===t?$(".horale2Delete").prop("disabled",!1):$(".horale2Delete").prop("disabled",!0))})),s("#form","crud.php"),$(".horale2Delete").click((function(){let a=$(o).DataTable().row($(this).parents("tr")).data();bootbox.confirm({message:'<span class="fonth fw5">¿Eliminar asignación Desde Hasta?</span><br>\n                        <div class="fontq mt-3">\n                            <p class="p-0 m-0"><label class="w60 fontq">Legajo:</label><span class="fw5">('+a.Legajo+") "+a.ApNo+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Fecha:</label><span class="fw5">'+a.Ho2Fec1+" al "+a.Ho2Fec2+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Horario:</label><span class="fw5">('+a.Ho2Hora+") "+a.HorDesc+"</span></p>\n                        </div>\n                        ",buttons:{confirm:{label:"Aceptar",className:"btn-custom text-white btn-sm fontq submit"},cancel:{label:"Cancelar",className:"btn-light btn-sm fontq text-secondary"}},callback:function(e){if(e){let e='<div class="spinner-border fontppp" role="status" style="width: 15px; height:15px" ></div>';$.ajax({type:"POST",url:"crud.php",data:{NumLega:a.Legajo,FechaIni:a.Ho2Fec1,FechaFin:a.Ho2Fec2,Codhor:a.Ho2Hora,tipo:"d_horale2"},beforeSend:function(a){$.notifyClose(),ActiveBTN(!0,".submit","Aguarde..","Aceptar"),notify('Procesando <span class = "dotting mr-1"> </span> '+e,"info",0,"right")},success:function(a){"ok"==a.status?(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"success",5e3,"right"),t()):(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"danger",5e3,"right"))}})}}})}))},createdRow:function(a,t,e){$(a).addClass("animate__animated animate__fadeIn")},ajax:{url:"getHorale.php",type:"POST",dataType:"json",data:function(t){t.datos=a},error:function(){$(o).css("display","none")}},columns:[{className:"align-middle",targets:"Ho2Fec1",title:"Desde",render:function(a,t,e,o){return'<span title="Fecha Inicio">'+e.Ho2Fec1+"</span>"}},{className:"align-middle",targets:"Ho2Fec2",title:"Hasta",render:function(a,t,e,o){return'<span title="Fecha Fin">'+e.Ho2Fec2+"</span>"}},{className:"align-middle",targets:"Ho2Hora",title:"",render:function(a,t,e,o){return'<span title="Código de Horario">'+e.Ho2Hora+"</span>"}},{className:"align-middle w-100",targets:"HorDesc",title:"Horario",render:function(a,t,e,o){return'<span title="Horario">'+e.HorDesc+"</span>"}},{className:"align-middle",targets:"",title:"",render:function(a,t,e,o){let i=JSON.stringify({horario:e.CodHor,legajo:e.Legajo,fecha:e.FechaStr,tabla:"Desde"});return'\n                        <div class="btn-group dropleft float-right">\n                            <button type="button" class="btn btn-sm fontq text-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                                <i class="bi bi-three-dots-vertical"></i>\n                            </button>\n                            <div class="dropdown-menu p-0 border-0" style="width:60px !important">\n                                <button data="'+i+'" title="Editar asignación" class="actModal2 float-right btn btn-outline-custom border mx-1 btn-sm fontq"><i class="bi bi-pencil"></i></button>\n                                <button  data="'+i+'" title="Eliminar asignación" class="horale2Delete float-right btn btn-outline-danger border btn-sm fontq"><i class="bi bi-trash"></i></button>\n                            </div>\n                        </div>\n                        '}}],deferRender:!0,bProcessing:!1,serverSide:!1,paging:!1,searching:!1,info:!1,ordering:!1,responsive:!1,language:{url:"/"+_homehost+"/js/DataTableSpanishShort2.json"}})}(d,"#Horale2"),i(b,"#Rotacion"),$(".cita").click((function(){CheckSesion(),$("#divCitaciones").remove(),$(".divTablas").append('\n            <div class="shadow-sm border" id="divCitaciones" style="display:none">\n                <div class="p-2 border-bottom-0 fontq d-inline-flex w-100 justify-content-between align-items-center bg-light text-dark fw4" id="titleCitaciones">Citaciones</div><div class="overflow-auto w-100 table-responsive" style="max-height:150px">\n                    <table class="table text-wrap w-100" id="Citacion"></table>\n                </div>\n            </div>\n            '),function(t,e){$(e).dataTable({initComplete:function(a){},drawCallback:function(t){$(e+" thead").remove();let o='<div>Citaciones: <span class="ls1">('+t.aiDisplay.length+")</span></div>",i='<button title="Nueva citación" class="btn btn-sm btn-custom px-2 pointer border c_citacion"><i class="bi bi-plus"></i></button>';if(0==t.aiDisplay.length){let a='<div class="fw4">Sin Citaciones</div>';$("#titleCitaciones").html(a+i),$(e).hide()}else $(e).show(),$("#titleCitaciones").html(o+i);$(".c_citacion").click((function(){CheckSesion(),$("#actModalCit .modal-title").html("Nueva Citación"),getHTML("bodyHorale1.html","#actModalCitbody"),setTimeout((()=>{$("#actModalCitbody #divtableHorarios").remove(),$("#actModalCitbody #H1Horario label").remove(),$("#actModalCitbody #inputH1Codhor").remove(),$("#actModalCitbody #inputH1horario").remove(),$("#actModalCitbody #inputH1Fecha").remove(),$("#actModalCitbody #H1Fecha").remove(),$("#actModalCitbody #H1Horario").prepend('\n                        <label class="fontq">Fecha:</label>\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeIn mb-2">\n                            <input type="text" class="form-control text-center h40 w150" name="Fecha" id="Fecha">\n                            <input type="hidden" class="form-control text-center h40 w150" name="alta_Citación" id="alta_Citación" value="true">\n                        </div>\n                        <label class="fontq mt-2">Entra / Sale / Descanso</label>\n                        <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeIn">\n                            <input type="tel" class="form-control text-center h40 w100 HoraMask" name="CitEntra" id="CitEntra" placeholder="00:00" autocomplete=off >\n                            <input type="tel" class="mx-1 form-control text-center h40 w100 HoraMask" name="CitSale" id="CitSale" placeholder="00:00" autocomplete=off >\n                            <input type="tel" class="form-control text-center h40 w100 HoraMask" name="CitDesc" id="CitDesc" value="00:00" autocomplete=off >\n                        </div>\n                        <input type="hidden" class="" name="datos_Citacion" id="datos_Citacion">\n                        '),singleDatePicker("#Fecha","right","down"),$("#actModalCitbody #H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+$("#divData .NumLega").text()+") "+$("#divData .ApNo").text()+"</span>"),$("#actModalCitbody #inputH1Legajo").val($("#divData .NumLega").text()),$("#actModalCitbody #inputTipo").val("c_citacion"),$("#actModalCitbody #datos_Citacion").val($("#divData .NumLega").text()+"-"+$("#Fecha").val()),$("#actModalCitbody #Fecha").change((function(){$("#actModalCitbody #datos_Citacion").val($("#divData .NumLega").text()+"-"+$("#Fecha").val())})),$("#actModalCitbody .HoraMask").mask(a,spOptions),$("#actModalCit").modal("show")}),200),l()})),$(".actModalCit").click((function(){CheckSesion();let t=$(e).DataTable().row($(this).parents("tr")).data();$("#actModalCit .modal-title").html("Editar Citación"),getHTML("bodyHorale1.html","#actModalCitbody"),setTimeout((()=>{$("#actModalCitbody #divtableHorarios").remove(),$("#actModalCitbody #H1Horario label").remove(),$("#actModalCitbody #inputH1Codhor").remove(),$("#actModalCitbody #inputH1horario").remove(),$("#actModalCitbody #inputH1Fecha").remove(),$("#actModalCitbody #H1Fecha").remove(),$("#actModalCitbody #H1Horario").prepend('\n                                <label class="fontq">Fecha:</label>\n                                <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeIn mb-2">\n                                    <input type="text" class="form-control text-center h40 w150" name="Fecha" id="Fecha">\n                                    <input type="hidden" class="form-control text-center h40 w150" name="alta_Citación" id="alta_Citación" value="true">\n                                </div>\n                                <label class="fontq mt-2">Entra / Sale / Descanso</label>\n                                <div class="d-inline-flex align-items-center w-100 animate__animated animate__fadeIn">\n                                    <input type="tel" class="form-control text-center h40 w100 HoraMask" name="CitEntra" id="CitEntra" placeholder="00:00" autocomplete=off>\n                                    <input type="tel" class="mx-1 form-control text-center h40 w100 HoraMask" name="CitSale" id="CitSale" placeholder="00:00" autocomplete=off>\n                                    <input type="tel" class="form-control text-center h40 w100 HoraMask" name="CitDesc" id="CitDesc" value="00:00" autocomplete=off>\n                                </div>\n                                <input type="hidden" class="" name="datos_Citacion" id="datos_Citacion">\n                                '),singleDatePicker("#Fecha","right","down"),$("#Fecha").data("daterangepicker").setStartDate(t.CitFech),$("#Fecha").data("daterangepicker").setEndDate(t.CitFech),$("#actModalCitbody #CitEntra").val(t.CitEntra),$("#actModalCitbody #CitSale").val(t.CitSale),$("#actModalCitbody #CitDesc").val(t.CitDesc),$("#actModalCitbody #H1Legajo").html('<label class="w60 fontq">Legajo:</label><span class="fw5">('+$("#divData .NumLega").text()+") "+$("#divData .ApNo").text()+"</span>"),$("#actModalCitbody #inputH1Legajo").val($("#divData .NumLega").text()),$("#actModalCitbody #inputTipo").val("c_citacion"),$("#actModalCitbody #datos_Citacion").val($("#divData .NumLega").text()+"-"+$("#Fecha").val()),$("#actModalCitbody #Fecha").change((function(){$("#actModalCitbody #datos_Citacion").val($("#divData .NumLega").text()+"-"+$("#Fecha").val())})),$("#actModalCitbody .HoraMask").mask(a,spOptions),$("#actModalCit").modal("show")}),200),l()})),$(".CitDelete").click((function(){let a=$(e).DataTable().row($(this).parents("tr")).data();bootbox.confirm({message:'<span class="fonth fw5">¿Eliminar citación?</span><br>\n                        <div class="fontq mt-3">\n                            <p class="p-0 m-0"><label class="w60 fontq">Legajo:</label><span class="fw5">('+a.CitLega+") "+a.ApNo+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Fecha:</label><span class="fw5">'+a.CitFech+'</span></p>\n                            <p class="p-0 m-0"><label class="w60 fontq">Citación: </label><span class="fw5">'+a.CitEntra+" a "+a.CitSale+"</span></p>\n                        </div>\n                        ",buttons:{confirm:{label:"Aceptar",className:"btn-custom text-white btn-sm fontq submit"},cancel:{label:"Cancelar",className:"btn-light btn-sm fontq text-secondary"}},callback:function(t){if(t){let t='<div class="spinner-border fontppp" role="status" style="width: 15px; height:15px" ></div>';$.ajax({type:"POST",url:"../../general/insert.php",data:{NumLega:a.CitLega,Fecha:a.CitFech,tipo:"d_citacion",Datos:a.CitLega+"-"+a.CitFech,baja_Cit:"true"},beforeSend:function(a){$.notifyClose(),ActiveBTN(!0,".submit","Aguarde..","Aceptar"),notify('Procesando <span class = "dotting mr-1"> </span> '+t,"info",0,"right")},success:function(a){"ok"==a.status?(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"success",5e3,"right"),$("#Citacion").DataTable().ajax.reload(null,!1),$("#actModalCit").modal("hide"),n($("#divData .NumLega").text())):(ActiveBTN(!1,".submit","Aguarde..","Aceptar"),$.notifyClose(),notify(a.Mensaje,"danger",5e3,"right"))}})}}})})),$.each(t.json,(function(a,t){"_aCit"==a?1===t?$(".c_citacion").prop("disabled",!1):$(".c_citacion").prop("disabled",!0):"_mCit"==a?1===t?$(".actModalCit").prop("disabled",!1):$(".actModalCit").prop("disabled",!0):"_bCit"==a?1===t?$(".CitDelete").prop("disabled",!1):$(".CitDelete").prop("disabled",!0):"TotalCit"==a&&(t>0?$(".cita").html("Citaciones ("+t+")"):$(".cita").html("Citaciones (0)"))}))},createdRow:function(a,t,e){$(a).addClass("animate__animated animate__fadeIn")},ajax:{url:"getHorale.php",type:"POST",dataType:"json",data:function(a){a.datos=t},error:function(){$(e).css("display","none")}},columns:[{className:"align-middle",targets:"CitFech",title:"Fecha",render:function(a,t,e,o){return'<span title="Fecha Citación">'+e.CitFech+"</span>"}},{className:"align-middle text-nowrap",targets:"CitEntra",title:"Citación",render:function(a,t,e,o){return'<span title="Horario de Citación">'+e.CitEntra+" a "+e.CitSale+"</span>"}},{className:"align-middle w-100",targets:"CitDesc",title:"Descanso",render:function(a,t,e,o){return'<span title="Descanso de Citación">'+e.CitDesc+"</span>"}},{className:"align-middle",targets:"",title:"",render:function(a,t,e,o){let i=JSON.stringify({horario:e.CodHor,legajo:e.Legajo,fecha:e.FechaStr,tabla:"Desde"});return'\n                        <div class="btn-group dropleft float-right">\n                            <button type="button" class="btn btn-sm fontq text-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                                <i class="bi bi-three-dots-vertical"></i>\n                            </button>\n                            <div class="dropdown-menu p-0 border-0" style="width:60px !important">\n                                <button data="'+i+'" title="Editar citación" class="actModalCit float-right btn btn-outline-custom border mx-1 btn-sm fontq"><i class="bi bi-pencil"></i></button>\n                                <button  data="'+i+'" title="Eliminar citación" class="CitDelete float-right btn btn-outline-danger border btn-sm fontq"><i class="bi bi-trash"></i></button>\n                            </div>\n                        </div>\n                        '}}],deferRender:!0,bProcessing:!1,serverSide:!1,paging:!1,searching:!1,info:!1,ordering:!1,responsive:!1,language:{url:"/"+_homehost+"/js/DataTableSpanishShort2.json"}})}(p,"#Citacion"),setTimeout((()=>{$("#divCitaciones").show()}),200)})),setTimeout((()=>{$("#detalleHorario").show(),$("#divHorarioActual").show()}),200)}))}));