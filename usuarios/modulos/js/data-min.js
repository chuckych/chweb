$(document).ready((function(){$.ajax({type:"POST",dataType:"json",url:"getTipoModulos.php",data:{tipo:!0},beforeSend:function(){$("#v-pills-tab").append('<div id="espera" class="fontq text-secondary fw5">Obteniendo datos..</div>')},success:function(t){"ok"==t.status&&($("#espera").remove(),$.each(t.datos,(function(t,e){var a;a=e.id,$.ajax({type:"POST",dataType:"json",url:"getTipoModulos.php",data:{modulos:!0,recidRol:getUrlParameter("_r"),tipo:a},beforeSend:function(){},success:function(t){"ok"==t.status&&$.each(t.datos,(function(t,e){$(".pills-"+e.tipo).append('<div class="col-sm-6 col-lg-4 col-xl-3 col-12"><div class="custom-control custom-checkbox"><input type="checkbox" value="'+e.id+'" name="amod[]" class="custom-control-input switch_'+e.tipo+'" id="m'+TrimEspacios(e.nombre)+'m"><label class="custom-control-label text-dark fw4" for="m'+TrimEspacios(e.nombre)+'m" style="padding-top: 3px;">'+e.nombre+"</label></div></div>")}))},error:function(){}});var o,i,s=parseFloat(e.CantMod);s>0&&($("#v-pills-tab").append('<a class="nav-link fw4 fontq btn-outline-custom border mt-1" id="'+e.id+'-tab" data-toggle="pill" dataTipo="'+e.id+'" href="#v-pills-'+e.id+'" role="tab" aria-controls="v-pills-'+e.id+'" aria-selected="false">'+e.TipoModulo+"</a>"),$("#1-tab").addClass("active"),$("#v-pills-tabContent").append('<div class="tab-pane fade" id="v-pills-'+e.id+'" role="tabpanel"  aria-labelledby="v-pills-'+e.id+'-tab"><button class="fontq fw4 btn btn-sm btn-link border-0 text-gris" id="marcar_'+e.id+'">Marcar Todo</button><button class="fontq fw4 btn btn-sm btn-link border-0 ml-2 text-gris" id="desmarcar_'+e.id+'">Desmarcar</button><p></p><form action="crud_mod.php" method="POST" id="Form_'+e.id+'"><input type="hidden" name="TipoMod" value="'+e.id+'"><div class="row pills-'+e.id+'"></div><p></p><button type="submit" class="fontq fw4 btn btn-custom border px-3" id="Guardar_'+e.id+'">Guardar</button><span class="ml-2 fw5 fontq align-middle respuesta"></span></form></div>'),$("#v-pills-1").addClass("show active"),o="#Form_"+e.id,i="#Guardar_"+e.id,$(o).bind("submit",(function(t){t.preventDefault(),$.ajax({type:$(this).attr("method"),url:$(this).attr("action"),data:$(this).serialize()+"&recidRol= "+getUrlParameter("_r"),dataType:"json",beforeSend:function(t){ActiveBTN(!0,i,"Aguarde..","Guardar"),$.notifyClose(),notify("Aguarde..","info",0,"right")},success:function(t){"ok"==t.status?(ActiveBTN(!1,i,"Aguarde..","Guardar"),$(".respuesta").html(t.Mensaje),setTimeout((()=>{$(".respuesta").html("")}),2e3),$.notifyClose(),notify(t.Mensaje,"success",5e3,"right")):(ActiveBTN(!1,i,"Aguarde..","Guardar"),$(".respuesta").html(t.Mensaje),$.notifyClose(),notify(t.Mensaje,"danger",5e3,"right"))},error:function(t){ActiveBTN(!1,i,"Aguarde..","Guardar"),$(".respuesta").html(t.Mensaje),$.notifyClose(),notify(t.Mensaje,"danger",5e3,"right")}})})),$(document).on("click","#marcar_"+e.id,(function(t){$(".switch_"+e.id).prop("checked",!0),$(".switch_"+e.id).attr("name","amod[]")})),$(document).on("click","#desmarcar_"+e.id,(function(t){$(".switch_"+e.id).prop("checked",!1),$(".switch_"+e.id).attr("name","amod[]")}))),0==s&&$("#"+e.id+"-tab").addClass("disabled bg-light"),$(".nav-link").on("click",(function(t){$(".respuesta").html("")}))})),$.ajax({type:"POST",dataType:"json",url:"getTipoModulos.php",data:{activos:!0,recidRol:getUrlParameter("_r")},beforeSend:function(){},success:function(t){"ok"==t.status&&$.each(t.datos,(function(t,e){e.mod_roles,$("#m"+TrimEspacios(e.modulo)+"m").prop("checked",!0)})),$("#v-pills-tabContent").removeClass("d-none"),fadeInOnly("#v-pills-tabContent"),setTimeout((()=>{$("#RowModulos").removeClass("d-none"),fadeInOnly("#RowModulos")}),500)},error:function(){}}))},error:function(){}})}));